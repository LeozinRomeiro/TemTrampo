@page "/propostas"
@inject AppDbContext _context
@rendermode InteractiveServer
@inject IDialogService DialogService

<PageTitle>Propostas de Vagas</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Gerencie suas propostas</MudText>

<MudGrid Justify="Justify.FlexEnd">
    <MudItem xs="12" sm="6" md="2">
        <MudButton @onclick="AbrirFormulario" Variant="Variant.Outlined" Color="Color.Primary" Style="margin: 10px">
            Cadastrar nova vaga
        </MudButton>
    </MudItem>
</MudGrid>
<Tabela MinhasVagas='true' Vagas="vagas"></Tabela>



@code {
    private List<Vaga>? vagas = null;

    private void AbrirFormulario(){
        var options = new DialogOptions { MaxWidth = MaxWidth.Medium, FullWidth = true, Position=DialogPosition.Center };
        DialogService.Show<Formulario>("Cadastre sua vaga disponivel", options);
    }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            vagas = await _context.Vagas.ToListAsync();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Erro ao buscar as vagas: {ex.Message}");
        }
    }
}